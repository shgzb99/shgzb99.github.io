<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="英雄本色的博客，记录生活，分享感悟。">
<meta property="og:type" content="website">
<meta property="og:title" content="英雄本色的博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="英雄本色的博客">
<meta property="og:description" content="英雄本色的博客，记录生活，分享感悟。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="英雄本色">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>英雄本色的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">英雄本色的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录生活，分享感悟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/15/%E6%8C%82%E8%BD%BD-dd-%E9%95%9C%E5%83%8F%E4%B8%AD%E7%9A%84%E5%88%86%E5%8C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/15/%E6%8C%82%E8%BD%BD-dd-%E9%95%9C%E5%83%8F%E4%B8%AD%E7%9A%84%E5%88%86%E5%8C%BA/" class="post-title-link" itemprop="url">挂载-dd-镜像中的分区</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-15 06:21:44 / 修改时间：06:25:32" itemprop="dateCreated datePublished" datetime="2024-06-15T06:21:44+08:00">2024-06-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原文 <a target="_blank" rel="noopener" href="https://k4yt3x.com/%E6%8C%82%E8%BD%BD-dd-%E9%95%9C%E5%83%8F%E4%B8%AD%E7%9A%84%E5%88%86%E5%8C%BA/">https://k4yt3x.com/%E6%8C%82%E8%BD%BD-dd-%E9%95%9C%E5%83%8F%E4%B8%AD%E7%9A%84%E5%88%86%E5%8C%BA/</a></p>
<p>旧系统在重装之前备份到了 dd 镜像，而重装完了之后发现有些文件遗忘在了原先的 EFI 分区。我将在这篇 post 中简单讲述我是怎么将 dd 镜像里的分区挂载到系统并且取回文件的。</p>
<ol>
<li>将 dd 镜像挂载为 loop 设备<br>我的硬盘镜像文件名为 vagrant.dd，所以我可以使用以下命令将该 dd 镜像挂载为 loop 设备。losetup 命令会自动扫描 dd 镜像中的分区并将其挂载到 &#x2F;dev&#x2F;loopX。这里的回显显示所有分区都被挂载到了 &#x2F;dev&#x2F;loop0 下。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo losetup --partscan --find --show vagrant.dd</span><br><span class="line">/dev/loop0</span><br></pre></td></tr></table></figure>
<p>挂载完成后，我们可以用 lsblk 命令查看新的 loop 设备，加上 -f 开关则可以显示设备的文件系统信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sudo lsblk -fp /dev/loop0</span><br><span class="line">NAME           FSTYPE      FSVER LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br><span class="line">/dev/loop0</span><br><span class="line">├─/dev/loop0p1 vfat        FAT32       1396-7EA5</span><br><span class="line">├─/dev/loop0p2 ext2        1.0         c5da8f36-6698-4478-97a8-93101bf44bb8</span><br><span class="line">└─/dev/loop0p3 crypto_LUKS 2           7a3d56b5-20f8-44f2-b1a7-8c858bba342c</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>挂载文件系统<br>在挂载完环回设备后，接下来的挂载就和挂载普通文件系统无异了。只需要用 mount 命令将 loop 设备挂载到任意挂载点即可读取。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mount -o ro /dev/loop0p1 ~/boot</span><br><span class="line">$ k ~/boot</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x 4 root root 4096 12 Aug    2020   EFI</span><br><span class="line">drwxr-xr-x 2 root root 4096 12 Aug    2020   System Volume Information</span><br></pre></td></tr></table></figure>
<p><img src="https://k4yt3x.com/%E6%8C%82%E8%BD%BD-dd-%E9%95%9C%E5%83%8F%E4%B8%AD%E7%9A%84%E5%88%86%E5%8C%BA/screenshot.png"><br>全流程截图</p>
<ol start="3">
<li>解除挂载<br>使用完毕之后，按顺序解除两个挂载即可。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo umount ~/boot</span><br><span class="line">sudo losetup -d /dev/loop0</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/14/Linux-gzip%E5%91%BD%E4%BB%A4%E6%95%99%E7%A8%8B%EF%BC%9A%E5%A6%82%E4%BD%95%E6%9C%89%E6%95%88%E5%9C%B0%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6-%E9%99%84%E5%AE%9E%E4%BE%8B%E8%AF%A6%E8%A7%A3%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/14/Linux-gzip%E5%91%BD%E4%BB%A4%E6%95%99%E7%A8%8B%EF%BC%9A%E5%A6%82%E4%BD%95%E6%9C%89%E6%95%88%E5%9C%B0%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6-%E9%99%84%E5%AE%9E%E4%BE%8B%E8%AF%A6%E8%A7%A3%E5%92%8C%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="post-title-link" itemprop="url">Linux gzip命令教程：如何有效地压缩和解压文件(附实例详解和注意事项)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-14 17:27:07 / 修改时间：17:32:41" itemprop="dateCreated datePublished" datetime="2024-06-14T17:27:07+08:00">2024-06-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原文</p>
<p>Linux gzip命令介绍<br>gzip（GNU zip）是一种在Linux系统中常见的命令行压缩工具。它使用DEFLATE压缩算法来减小文件的大小，使文件更易于存储和传输。gzip主要用于压缩文本文件、Tar归档文件和网页。不建议使用gzip来压缩图像、音频、PDF文档和其他已经压缩的二进制文件。</p>
<p>Linux gzip命令适用的Linux版本<br>gzip命令在大多数Linux发行版中都可以使用，包括Debian、Ubuntu、Alpine、Arch Linux、Kali Linux、RedHat&#x2F;CentOS、Fedora和Raspbian。如果在某些Linux发行版中无法使用gzip命令，通常可以通过包管理器（如apt、yum或dnf）来安装。</p>
<p>例如，在Debian或Ubuntu上，可以使用以下命令来安装gzip：</p>
<p>[<a href="mailto:&#x6c;&#105;&#110;&#x75;&#x78;&#64;&#x62;&#x61;&#x73;&#x68;&#99;&#x6f;&#109;&#109;&#97;&#x6e;&#100;&#110;&#111;&#116;&#x66;&#111;&#x75;&#110;&#x64;&#x2e;&#99;&#110;">&#x6c;&#105;&#110;&#x75;&#x78;&#64;&#x62;&#x61;&#x73;&#x68;&#99;&#x6f;&#109;&#109;&#97;&#x6e;&#100;&#110;&#111;&#116;&#x66;&#111;&#x75;&#110;&#x64;&#x2e;&#99;&#110;</a> ~]$ sudo apt-get install gzip<br>1<br>在RedHat&#x2F;CentOS 7上，可以使用以下命令来安装gzip：</p>
<p>[<a href="mailto:&#108;&#x69;&#x6e;&#117;&#120;&#x40;&#x62;&#97;&#x73;&#x68;&#99;&#111;&#109;&#x6d;&#97;&#x6e;&#x64;&#110;&#111;&#x74;&#102;&#111;&#117;&#110;&#x64;&#46;&#x63;&#x6e;">&#108;&#x69;&#x6e;&#117;&#120;&#x40;&#x62;&#97;&#x73;&#x68;&#99;&#111;&#109;&#x6d;&#97;&#x6e;&#x64;&#110;&#111;&#x74;&#102;&#111;&#117;&#110;&#x64;&#46;&#x63;&#x6e;</a> ~]$ sudo yum install gzip<br>1<br>在RedHat&#x2F;CentOS 8或Fedora上，可以使用以下命令来安装gzip：</p>
<p>[<a href="mailto:&#108;&#x69;&#x6e;&#117;&#120;&#64;&#98;&#x61;&#115;&#x68;&#99;&#x6f;&#109;&#109;&#x61;&#x6e;&#100;&#110;&#111;&#x74;&#102;&#x6f;&#x75;&#x6e;&#100;&#x2e;&#99;&#x6e;">&#108;&#x69;&#x6e;&#117;&#120;&#64;&#98;&#x61;&#115;&#x68;&#99;&#x6f;&#109;&#109;&#x61;&#x6e;&#100;&#110;&#111;&#x74;&#102;&#x6f;&#x75;&#x6e;&#100;&#x2e;&#99;&#x6e;</a> ~]$ sudo dnf install gzip<br>1<br>Linux gzip命令的基本语法<br>gzip命令的基本语法如下：</p>
<p>gzip [OPTION]… [FILE]…<br>1<br>gzip只能压缩单个文件，并为每个给定的文件创建一个压缩文件。</p>
<p>Linux gzip命令的常用选项或参数说明<br>以下是gzip命令的一些常用选项：</p>
<p>选项	说明<br>-d	解压缩文件<br>-f	强制压缩文件，即使已经存在同名的压缩文件<br>-k	压缩文件并保留原始文件<br>-r	递归地压缩目录中的所有文件<br>-v	显示正在处理的文件的名称和压缩比<br>-1	最快的压缩速度，最小的压缩比<br>-9	最慢的压缩速度，最大的压缩比<br>Linux gzip命令实例详解<br>以下是一些gzip命令的使用实例：</p>
<p>实例1：压缩单个文件<br>要压缩单个文件，可以调用gzip命令，后面跟着文件名：</p>
<p>[<a href="mailto:&#108;&#x69;&#x6e;&#x75;&#x78;&#x40;&#98;&#x61;&#115;&#x68;&#x63;&#111;&#x6d;&#109;&#x61;&#x6e;&#100;&#110;&#111;&#116;&#102;&#x6f;&#x75;&#110;&#x64;&#46;&#99;&#110;">&#108;&#x69;&#x6e;&#x75;&#x78;&#x40;&#98;&#x61;&#115;&#x68;&#x63;&#111;&#x6d;&#109;&#x61;&#x6e;&#100;&#110;&#111;&#116;&#102;&#x6f;&#x75;&#110;&#x64;&#46;&#99;&#110;</a> ~]$ gzip filename<br>1<br>gzip将创建一个名为filename.gz的文件，并删除原始文件。</p>
<p>实例2：保留原始文件<br>如果你想保留输入（原始）文件，可以使用-k选项：</p>
<p>[<a href="mailto:&#108;&#x69;&#110;&#x75;&#120;&#x40;&#98;&#x61;&#x73;&#x68;&#x63;&#x6f;&#109;&#x6d;&#97;&#x6e;&#x64;&#x6e;&#x6f;&#116;&#102;&#x6f;&#x75;&#x6e;&#100;&#46;&#x63;&#110;">&#108;&#x69;&#110;&#x75;&#120;&#x40;&#98;&#x61;&#x73;&#x68;&#x63;&#x6f;&#109;&#x6d;&#97;&#x6e;&#x64;&#x6e;&#x6f;&#116;&#102;&#x6f;&#x75;&#x6e;&#100;&#46;&#x63;&#110;</a> ~]$ gzip -k filename<br>1<br>实例3：压缩多个文件<br>你也可以将多个文件作为参数传递给命令。例如，要压缩名为file1、file2、file3的文件，你可以运行以下命令：</p>
<p>[<a href="mailto:&#108;&#x69;&#110;&#x75;&#120;&#64;&#x62;&#97;&#x73;&#104;&#99;&#111;&#109;&#109;&#97;&#x6e;&#100;&#x6e;&#x6f;&#116;&#102;&#x6f;&#117;&#x6e;&#100;&#46;&#99;&#110;">&#108;&#x69;&#110;&#x75;&#120;&#64;&#x62;&#97;&#x73;&#104;&#99;&#111;&#109;&#109;&#97;&#x6e;&#100;&#x6e;&#x6f;&#116;&#102;&#x6f;&#117;&#x6e;&#100;&#46;&#99;&#110;</a> ~]$ gzip file1 file2 file3<br>1<br>以上命令将创建三个压缩文件，file1.gz、file2.gz、file3.gz。</p>
<p>实例4：改变压缩级别<br>gzip允许你指定从1到9的压缩级别。-1或–fast表示最快的压缩速度和最小的压缩比，-9或–best表示最慢的压缩速度和最大的压缩比。例如，要获得最大的压缩，你可以运行：</p>
<p>[<a href="mailto:&#x6c;&#105;&#x6e;&#117;&#x78;&#x40;&#98;&#97;&#115;&#104;&#x63;&#111;&#109;&#109;&#x61;&#110;&#x64;&#x6e;&#x6f;&#116;&#102;&#111;&#117;&#110;&#100;&#46;&#99;&#110;">&#x6c;&#105;&#x6e;&#117;&#x78;&#x40;&#98;&#97;&#115;&#104;&#x63;&#111;&#109;&#109;&#x61;&#110;&#x64;&#x6e;&#x6f;&#116;&#102;&#111;&#117;&#110;&#100;&#46;&#99;&#110;</a> ~]$ gzip -9 filename<br>1<br>实例5：解压缩文件<br>要解压缩一个gzip压缩的文件，你可以使用-d选项：</p>
<p>[<a href="mailto:&#x6c;&#105;&#x6e;&#117;&#120;&#64;&#98;&#97;&#115;&#x68;&#x63;&#x6f;&#109;&#109;&#97;&#x6e;&#x64;&#x6e;&#x6f;&#x74;&#102;&#111;&#117;&#110;&#100;&#x2e;&#x63;&#x6e;">&#x6c;&#105;&#x6e;&#117;&#120;&#64;&#98;&#97;&#115;&#x68;&#x63;&#x6f;&#109;&#109;&#97;&#x6e;&#x64;&#x6e;&#x6f;&#x74;&#102;&#111;&#117;&#110;&#100;&#x2e;&#x63;&#x6e;</a> ~]$ gzip -d filename.gz<br>1<br>这将创建一个名为filename的文件，并删除原始的压缩文件filename.gz。</p>
<p>实例6：递归压缩目录<br>要递归地压缩一个目录中的所有文件，你可以使用-r选项：</p>
<p>[<a href="mailto:&#108;&#x69;&#x6e;&#117;&#120;&#64;&#x62;&#x61;&#115;&#x68;&#x63;&#x6f;&#x6d;&#x6d;&#97;&#110;&#x64;&#x6e;&#111;&#116;&#x66;&#111;&#x75;&#110;&#100;&#46;&#x63;&#x6e;">&#108;&#x69;&#x6e;&#117;&#120;&#64;&#x62;&#x61;&#115;&#x68;&#x63;&#x6f;&#x6d;&#x6d;&#97;&#110;&#x64;&#x6e;&#111;&#116;&#x66;&#111;&#x75;&#110;&#100;&#46;&#x63;&#x6e;</a> ~]$ gzip -r directoryname<br>1<br>这将压缩directoryname目录中的所有文件，并将每个文件替换为一个.gz压缩文件。</p>
<p>实例7：查看压缩文件的内容<br>要查看gzip压缩文件的内容，而不解压缩文件，你可以使用zcat命令：</p>
<p>[<a href="mailto:&#108;&#x69;&#110;&#x75;&#120;&#64;&#98;&#97;&#115;&#104;&#99;&#111;&#x6d;&#109;&#97;&#110;&#100;&#110;&#111;&#116;&#x66;&#x6f;&#x75;&#110;&#x64;&#x2e;&#99;&#x6e;">&#108;&#x69;&#110;&#x75;&#120;&#64;&#98;&#97;&#115;&#104;&#99;&#111;&#x6d;&#109;&#97;&#110;&#100;&#110;&#111;&#116;&#x66;&#x6f;&#x75;&#110;&#x64;&#x2e;&#99;&#x6e;</a> ~]$ zcat filename.gz<br>1<br>这将在终端中显示filename.gz文件的内容。</p>
<p>实例8：压缩文件并显示进度<br>如果你想在压缩文件时看到进度，你可以使用-v选项：</p>
<p>[<a href="mailto:&#108;&#105;&#110;&#117;&#120;&#64;&#x62;&#97;&#115;&#x68;&#99;&#x6f;&#x6d;&#x6d;&#x61;&#x6e;&#100;&#x6e;&#111;&#x74;&#x66;&#x6f;&#117;&#x6e;&#x64;&#x2e;&#x63;&#110;">&#108;&#105;&#110;&#117;&#120;&#64;&#x62;&#97;&#115;&#x68;&#99;&#x6f;&#x6d;&#x6d;&#x61;&#x6e;&#100;&#x6e;&#111;&#x74;&#x66;&#x6f;&#117;&#x6e;&#x64;&#x2e;&#x63;&#110;</a> ~]$ gzip -v filename<br>1<br>这将显示正在处理的文件的名称和压缩比。</p>
<p>实例9：解压缩文件并保留原始文件<br>如果你想解压缩一个gzip压缩的文件，并保留原始的压缩文件，你可以使用-d和-k选项：</p>
<p>[<a href="mailto:&#x6c;&#105;&#x6e;&#x75;&#120;&#64;&#98;&#x61;&#x73;&#104;&#x63;&#111;&#109;&#109;&#x61;&#110;&#100;&#x6e;&#111;&#x74;&#x66;&#111;&#117;&#110;&#100;&#46;&#x63;&#110;">&#x6c;&#105;&#x6e;&#x75;&#120;&#64;&#98;&#x61;&#x73;&#104;&#x63;&#111;&#109;&#109;&#x61;&#110;&#100;&#x6e;&#111;&#x74;&#x66;&#111;&#117;&#110;&#100;&#46;&#x63;&#110;</a> ~]$ gzip -dk filename.gz<br>1<br>这将创建一个名为filename的文件，并保留原始的压缩文件filename.gz。</p>
<p>实例10：解压缩多个文件<br>你也可以将多个压缩文件作为参数传递给命令。例如，要解压缩名为file1.gz、file2.gz、file3.gz的文件，你可以运行以下命令：</p>
<p>[<a href="mailto:&#x6c;&#x69;&#110;&#117;&#x78;&#64;&#98;&#x61;&#115;&#x68;&#99;&#111;&#x6d;&#109;&#x61;&#x6e;&#x64;&#x6e;&#111;&#x74;&#102;&#x6f;&#117;&#110;&#100;&#x2e;&#x63;&#110;">&#x6c;&#x69;&#110;&#117;&#x78;&#64;&#98;&#x61;&#115;&#x68;&#99;&#111;&#x6d;&#109;&#x61;&#x6e;&#x64;&#x6e;&#111;&#x74;&#102;&#x6f;&#117;&#110;&#100;&#x2e;&#x63;&#110;</a> ~]$ gzip -d file1.gz file2.gz file3.gz<br>1<br>以上命令将创建三个解压缩的文件，file1、file2、file3，并删除原始的压缩文件。</p>
<p>实例11：查看压缩文件的内容并保留原始文件<br>要查看gzip压缩文件的内容，而不解压缩文件，你可以使用zcat命令，并使用-k选项来保留原始的压缩文件：</p>
<p>[<a href="mailto:&#x6c;&#x69;&#110;&#117;&#x78;&#x40;&#98;&#97;&#115;&#104;&#x63;&#x6f;&#x6d;&#109;&#x61;&#x6e;&#x64;&#x6e;&#111;&#116;&#x66;&#111;&#x75;&#x6e;&#x64;&#46;&#x63;&#110;">&#x6c;&#x69;&#110;&#117;&#x78;&#x40;&#98;&#97;&#115;&#104;&#x63;&#x6f;&#x6d;&#109;&#x61;&#x6e;&#x64;&#x6e;&#111;&#116;&#x66;&#111;&#x75;&#x6e;&#x64;&#46;&#x63;&#110;</a> ~]$ zcat -k filename.gz<br>1<br>这将在终端中显示filename.gz文件的内容，并保留原始的压缩文件。</p>
<p>实例12：解压缩文件并显示进度<br>如果你想在解压缩文件时看到进度，你可以使用-d和-v选项：</p>
<p>[<a href="mailto:&#108;&#x69;&#x6e;&#x75;&#120;&#64;&#x62;&#x61;&#x73;&#x68;&#99;&#111;&#109;&#x6d;&#x61;&#x6e;&#x64;&#110;&#x6f;&#116;&#102;&#x6f;&#117;&#x6e;&#x64;&#46;&#x63;&#110;">&#108;&#x69;&#x6e;&#x75;&#120;&#64;&#x62;&#x61;&#x73;&#x68;&#99;&#111;&#109;&#x6d;&#x61;&#x6e;&#x64;&#110;&#x6f;&#116;&#102;&#x6f;&#117;&#x6e;&#x64;&#46;&#x63;&#110;</a> ~]$ gzip -dv filename.gz<br>1<br>这将显示正在处理的文件的名称和解压缩进度。</p>
<p>Linux gzip命令的注意事项<br>gzip可以压缩的只是常规文件。符号链接会被忽略。<br>如果你在尝试使用gzip命令时遇到了bash: gzip: command not found的错误，你可以按照上面的指示来安装gzip。<br>Linux gzip相关命令<br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-gzip-command">gzip命令：用于压缩或解压缩文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-gunzip-command">gunzip命令：用于解压gzip压缩的文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-zcat-command">zcat命令：用于查看gzip压缩的文件内容</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-zip-command">zip命令：用于压缩文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-zip-command">unzip命令：用于解压.zip压缩的文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-unzip-command">bzip2命令：用于高效的文件压缩工具</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-bzip2-command">bunzip2命令：用于解压缩bzip2压缩的文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-tar-command">tar命令：用于归档文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-rar-command">rar命令：用于压缩解压rar文件</a><br><a target="_blank" rel="noopener" href="https://bashcommandnotfound.cn/article/linux-7z-command">7z命令：用于压缩和解压7z格式的文件</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/14/linux%E4%B8%AD%E6%8C%82%E8%BD%BDIMG%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/14/linux%E4%B8%AD%E6%8C%82%E8%BD%BDIMG%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">linux中挂载IMG文件</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-14 17:17:35 / 修改时间：17:18:25" itemprop="dateCreated datePublished" datetime="2024-06-14T17:17:35+08:00">2024-06-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原文：<a target="_blank" rel="noopener" href="http://www.linuxsir.org/bbs/thread334903.html">http://www.linuxsir.org/bbs/thread334903.html</a></p>
<ol>
<li><p>先查看第一个空闲loop设备<br>Shell代码<br>sudo losetup -f<br>&#x2F;dev&#x2F;loop0  </p>
</li>
<li><p>使用上一步得到的设备名，第一次创建loop设备<br>Shell代码<br>sudo losetup &#x2F;dev&#x2F;loop0 archlinux-2008.06-core-i686.img  </p>
</li>
<li><p>查看信息<br>Shell代码<br>sudo fdisk -lu &#x2F;dev&#x2F;loop0</p>
</li>
</ol>
<p>Disk &#x2F;dev&#x2F;loop0: 322 MB, 322469376 bytes<br>53 heads, 12 sectors&#x2F;track, 990 cylinders, total 629823 sectors<br>Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes<br>Disk identifier: 0x00000000  </p>
<pre><code>  Device Boot      Start         End      Blocks   Id  System  
</code></pre>
<p>&#x2F;dev&#x2F;loop0p1   *          63      629822      314880   83  Linux<br>Partition 1 has different physical&#x2F;logical beginnings (non-Linux?):<br>     phys&#x3D;(0, 1, 1) logical&#x3D;(0, 5, 4)<br>Partition 1 has different physical&#x2F;logical endings:<br>     phys&#x3D;(39, 52, 12) logical&#x3D;(990, 15, 3)  </p>
<p>我们可以看到，该镜像只有一个分区(loop0p1)，从第63扇区开始(Start列)，每扇区512字节(Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes)，我们算出offset，下面mout命令会用到：<br>Shell代码<br>63*512&#x3D;32256  </p>
<ol start="4">
<li>mout<br>Shell代码<br>sudo losetup -o 32256 &#x2F;dev&#x2F;loop1 archlinux-2008.06-core-i686.img<br>sudo mount -o loop &#x2F;dev&#x2F;loop1 &#x2F;mnt&#x2F;<br>ls &#x2F;mnt&#x2F;<br>addons  archlive.sqfs  boot  lost+found</li>
</ol>
<p>事实上，fdisk可以直接查看img文件(虽然功能不全，下面会说到)，mount可以自动创建loop设备，所以上面步骤可以简化为：<br>I. 查看信息<br>Shell代码<br>sudo fdisk -lu archlinux-2008.06-core-i686.img<br>You must set cylinders.<br>You can do this from the extra functions menu.  </p>
<p>Disk archlinux-2008.06-core-i686.img: 0 MB, 0 bytes<br>53 heads, 12 sectors&#x2F;track, 0 cylinders, total 0 sectors<br>Units &#x3D; sectors of 1 * 512 &#x3D; 512 bytes<br>Disk identifier: 0x00000000  </p>
<pre><code>                      Device Boot      Start         End      Blocks   Id  System  
</code></pre>
<p>archlinux-2008.06-core-i686.img1   *          63      629822      314880   83  Linux<br>Partition 1 has different physical&#x2F;logical beginnings (non-Linux?):<br>     phys&#x3D;(0, 1, 1) logical&#x3D;(0, 5, 4)<br>Partition 1 has different physical&#x2F;logical endings:<br>     phys&#x3D;(39, 52, 12) logical&#x3D;(990, 15, 3)  </p>
<p>第一行抱怨不能得到cylinders，原因是普通文件上没有实现ioctl操作，我们可以看到0 cylinders，但这对我们不重要，关键是我们依然可以得到第一个分区（archlinux-2008.06-core-i686.img1）的偏移值</p>
<p>II. 直接mount<br>Shell代码<br>sudo mount -o loop,offset&#x3D;32256 archlinux-2008.06-core-i686.img &#x2F;mnt&#x2F;<br>ls &#x2F;mnt&#x2F;<br>addons  archlive.sqfs  boot  lost+found  </p>
<p>参考Loop-mounting partitions from a disk image</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/14/Linux%E4%B8%AD%E6%8C%82%E8%BD%BD%E5%90%84%E7%A7%8D%E6%A0%BC%E5%BC%8F%E9%95%9C%E5%83%8F%E7%9A%84%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/14/Linux%E4%B8%AD%E6%8C%82%E8%BD%BD%E5%90%84%E7%A7%8D%E6%A0%BC%E5%BC%8F%E9%95%9C%E5%83%8F%E7%9A%84%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Linux中挂载各种格式镜像的方法总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-06-14 17:10:27" itemprop="dateCreated datePublished" datetime="2024-06-14T17:10:27+08:00">2024-06-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-06-15 06:35:54" itemprop="dateModified" datetime="2024-06-15T06:35:54+08:00">2024-06-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原文 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ed9dbaabfee4">https://www.jianshu.com/p/ed9dbaabfee4</a></p>
<p>一、挂载iso格式镜像<br>1、将镜像文件拷贝到linux系统上。</p>
<p>2、执行命令：mount -t iso9660 -o loop &#x2F;root&#x2F;xxx.iso &#x2F;mnt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@h07d07184.sqa.eu95 /root]#mount -t iso9660 -o loop alinux-test.iso /mnt</span><br><span class="line"></span><br><span class="line">mount: /root/alinux-test.iso is already mounted</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>3、查看&#x2F;mnt文件夹，即可查看到镜像的文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@h07d07184.sqa.eu95 /root]#ls /mnt</span><br><span class="line"></span><br><span class="line">apptmp_run.over boot dev home lib64 media opt root run srv tmp varbin data etc lib lost+found mnt proc rr_moved sbin sys usr</span><br></pre></td></tr></table></figure>

<p>4、卸载：umount &#x2F;mnt</p>
<p>二、挂载qcow2格式镜像</p>
<ol>
<li>首先检查当前系统的kernel对NBD模块的支持（NBD:network block device），加载nbd这个module</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@jay-linux kvm_demo]# grep NBD /boot/config-3.5.0</span><br><span class="line"></span><br><span class="line">CONFIG_BLK_DEV_NBD=m</span><br><span class="line"></span><br><span class="line">[root@jay-linux kvm_demo]# modinfo nbd</span><br><span class="line"></span><br><span class="line">filename:      /lib/modules/3.5.0/kernel/drivers/block/nbd.ko</span><br><span class="line"></span><br><span class="line">license:        GPL</span><br><span class="line"></span><br><span class="line">description:    Network Block Device</span><br><span class="line"></span><br><span class="line">srcversion:    56F31584CC2EB73E6F1DA69</span><br><span class="line"></span><br><span class="line">depends:</span><br><span class="line"></span><br><span class="line">intree:        Y</span><br><span class="line"></span><br><span class="line">vermagic:      3.5.0 SMP mod_unload modversions</span><br><span class="line"></span><br><span class="line">parm:          nbds_max:number of network block devices to initialize (default: 16) (int)</span><br><span class="line"></span><br><span class="line">parm:          max_part:number of partitions per device (default: 0) (int)</span><br><span class="line"></span><br><span class="line">parm:          debugflags:flags for controlling debug output (int)</span><br><span class="line"></span><br><span class="line">[root@jay-linux kvm_demo]# modprobe nbd max_part=16</span><br><span class="line"></span><br><span class="line">[root@jay-linux kvm_demo]# lsmod | grep nbd</span><br><span class="line"></span><br><span class="line">nbd                    7593  0</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>将qcow2镜像映射为网络块设备(nbd)，命令如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@h07d07184.sqa.eu95 /mnt]#qemu-nbd -c /dev/nbd0 /root/Alinux-2.1.0-OUT-1220.qcow2</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /mnt]# ll /dev/nbd0*</span><br><span class="line"></span><br><span class="line">brw-rw---- 1 root disk 43, 0 Jan 10 10:17 /dev/nbd0</span><br><span class="line"></span><br><span class="line">brw-rw---- 1 root disk 43, 1 Jan 10 10:17 /dev/nbd0p1</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>像普通block设备那样使用刚才映射好的网络块设备的分区即可，命令行如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@h07d07184.sqa.eu95 /mnt]#mount /dev/nbd0p1 /mnt/[root@h07d07184.sqa.eu95 /mnt]#ls /mnt/ </span><br><span class="line"></span><br><span class="line">apptmp_run.over boot dev home lib64 media opt root sbin sys usrbin data etc lib lost+found mnt proc run srv tmp var</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>使用完这个qcow2镜像后，卸载已挂载的nbd设备，解除qcow2镜像与nbd设备的关联。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@jay-linux kvm_demo]# umount /mnt/</span><br><span class="line"></span><br><span class="line">[root@jay-linux kvm_demo]# qemu-nbd -d /dev/nbd0</span><br><span class="line"></span><br><span class="line">/dev/nbd0 disconnected</span><br></pre></td></tr></table></figure>

<p>三、挂载vhd格式镜像（与qcow2方法相似）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@h07d07184.sqa.eu95 /root]#ll /dev/nbd0*</span><br><span class="line"></span><br><span class="line">brw-rw---- 1 root disk 43, 0 Jan 10 10:31 /dev/nbd0</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /root]#qemu-nbd -c /dev/nbd0 aliyun-test.vhd[root@h07d07184.sqa.eu95 /root]#ll /dev/nbd0*</span><br><span class="line"></span><br><span class="line">brw-rw---- 1 root disk 43, 0 Jan 10 10:32 /dev/nbd0</span><br><span class="line"></span><br><span class="line">brw-rw---- 1 root disk 43, 1 Jan 10 10:32 /dev/nbd0p1</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /root]#mount /dev/nbd0p1 /mnt[root@h07d07184.sqa.eu95 /root]#ls /mnt/</span><br><span class="line"></span><br><span class="line">bin boot dev etc home lib lib64 lost+found media mnt opt proc root run sbin srv sys tmp usr var</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /root]#umount /mnt/</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /root]#qemu-nbd -d /dev/nbd0</span><br><span class="line"></span><br><span class="line">/dev/nbd0 disconnected</span><br><span class="line"></span><br><span class="line">[root@h07d07184.sqa.eu95 /root]#</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/13/tee-%E8%AF%BB%E5%8F%96%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%B9%B6%E8%BE%93%E5%87%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/13/tee-%E8%AF%BB%E5%8F%96%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E5%B9%B6%E8%BE%93%E5%87%BA/" class="post-title-link" itemprop="url">tee 读取标准输入并输出</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-13 22:12:44 / 修改时间：22:13:47" itemprop="dateCreated datePublished" datetime="2024-06-13T22:12:44+08:00">2024-06-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://einverne.github.io/post/2013/01/tee-command.html">https://einverne.github.io/post/2013/01/tee-command.html</a></p>
<p>在执行 Linux 命令时，我们可以把输出重定向到文件中，比如 <code>ls &gt; a.txt</code>，这时我们就不能看到输出了，如果我们既想把输出保存到文件中，又想在屏幕上看到输出内容，就可以使用 tee 命令了。tee 命令读取标准输入，把这些内容同时输出到标准输出和（多个）文件中（read from standard input and write to standard output and files. Copy standard input to each FILE, and also to standard output. If a FILE is -, copy again to standard output.）。</p>
<p>在 tee 中说道：tee 命令可以重定向标准输出到多个文件（<code>tee&#39;: Redirect output to multiple files. The </code>tee’ command copies standard input to standard output and also to any files given as arguments.  This is useful when you want not only to send some data down a pipe, but also to save a copy.）。要注意的是：在使用管道时，前一个命令的标准错误输出不会被 tee 读取。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>格式：</p>
<pre><code>tee file
</code></pre>
<p>输出到标准输出的同时，保存到文件 file 中。如果文件不存在，则创建；如果已经存在，则覆盖之。当使用 <code>-a</code> 参数时不会覆盖，而是附加。</p>
<p>格式：</p>
<pre><code>tee -a file
</code></pre>
<p>输出到标准输出的同时，追加到文件 file 中。如果文件不存在，则创建；如果已经存在，就在末尾追加内容，而不是覆盖。</p>
<p>格式：</p>
<pre><code>tee -
</code></pre>
<p>输出到标准输出两次。（A FILE of <code>-&#39; causes </code>tee’ to send another copy of input to standard output, but this is typically not that useful as the copies are interleaved.）</p>
<p>格式：</p>
<pre><code>tee file1 file2 -
</code></pre>
<p>输出到标准输出两次，同时保存到 file1 和 file2 中。</p>
<p>使用 tee 命令重复输出字符串</p>
<pre><code>echo 12345 | tee
12345

echo 12345 | tee -
12345
12345
echo 12345 | tee - -
12345
12345
12345
</code></pre>
<p>使用 tee 命令把标准错误输出也保存到文件，默认情况下 tee 是不会将标准错误内容也保存到文件的，这个时候需要使用 <code>2&gt;$1</code></p>
<pre><code>ls &quot;*&quot; 2&gt;&amp;1 | tee ls.txt
</code></pre>
<p>文件中就是</p>
<pre><code>ls: cannot access &#39;*&#39;: No such file or directory
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/13/dd%E5%91%BD%E4%BB%A4%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%E5%8F%8A%E6%89%8B%E5%8A%A8%E8%BF%81%E7%A7%BB%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/13/dd%E5%91%BD%E4%BB%A4%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%E5%8F%8A%E6%89%8B%E5%8A%A8%E8%BF%81%E7%A7%BB%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">dd命令显示进度及手动迁移系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-13 14:31:54 / 修改时间：14:32:42" itemprop="dateCreated datePublished" datetime="2024-06-13T14:31:54+08:00">2024-06-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/grumpyhippo/p/11260161.html#:~:text=dd%E5%91%BD%E4%BB%A4%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%201.%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%E6%89%A7%E8%A1%8Cdd%E5%91%BD%E4%BB%A4%202.%E5%8F%A6%E5%BC%80%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%EF%BC%8C%E6%89%A7%E8%A1%8Cwatch%20-n%205,pkill%20-USR1%20-x%20dd%203.%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8Cdd%E5%91%BD%E4%BB%A4%E7%9A%84%E7%AA%97%E5%8F%A3%E5%8D%B3%E5%8F%AF%E6%98%BE%E7%A4%BAdd%E6%89%A7%E8%A1%8C%E8%BF%9B%E5%BA%A6%EF%BC%8C%E7%9B%B4%E5%88%B0%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90">https://www.cnblogs.com/grumpyhippo/p/11260161.html#:~:text=dd%E5%91%BD%E4%BB%A4%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%201.%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%E6%89%A7%E8%A1%8Cdd%E5%91%BD%E4%BB%A4%202.%E5%8F%A6%E5%BC%80%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%EF%BC%8C%E6%89%A7%E8%A1%8Cwatch%20-n%205,pkill%20-USR1%20-x%20dd%203.%E5%9C%A8%E7%AC%AC%E4%B8%80%E4%B8%AA%E6%89%A7%E8%A1%8Cdd%E5%91%BD%E4%BB%A4%E7%9A%84%E7%AA%97%E5%8F%A3%E5%8D%B3%E5%8F%AF%E6%98%BE%E7%A4%BAdd%E6%89%A7%E8%A1%8C%E8%BF%9B%E5%BA%A6%EF%BC%8C%E7%9B%B4%E5%88%B0%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90</a></p>
<p>dd命令显示进度<br>1.第一个窗口执行dd命令<br>2.另开一个窗口，执行watch -n 5 pkill -USR1 -x dd<br>3.在第一个执行dd命令的窗口即可显示dd执行进度，直到任务完成</p>
<p>dd 网络磁盘克隆<br>dd if&#x3D;&#x2F;dev&#x2F;sda |ssh xxx.xxx.xxx.xxx “dd of&#x3D;&#x2F;dev&#x2F;sda bs&#x3D;4M”</p>
<p>linux手动迁移方法<br>1.在目标机器挂起live CD，并配置可通IP地址，开启ssh服务器，设置root密码。2.在原机执行dd if&#x3D;&#x2F;dev&#x2F;sda |ssh xxx.xxx.xxx.xxx “dd of&#x3D;&#x2F;dev&#x2F;sda bs&#x3D;4M”<br>3.第二步完成后再目标机live CD系统中将boot所在分区挂载起来，执行grub-install –root-directory&#x3D;&#x2F;mnt&#x2F;boot &#x2F;dev&#x2F;sda<br>4.目标机reboot<br>5.启动时进入grub&gt;<br>6.ls查看boot所在分区，例如查询可知在（hd0,msdos1）。执行：set root&#x3D;(hd0,msdos1);set prefix&#x3D;(hd0,msdos1)&#x2F;grub2;insmod normal;normal<br>7.执行完以上即可进入系统<br>8.进入系统后执行grub2-install &#x2F;dev&#x2F;sda<br>9.reboot目标机完成迁移。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/13/linux%E4%B8%8B%E6%98%BE%E7%A4%BAdd%E5%91%BD%E4%BB%A4%E7%9A%84%E8%BF%9B%E5%BA%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/13/linux%E4%B8%8B%E6%98%BE%E7%A4%BAdd%E5%91%BD%E4%BB%A4%E7%9A%84%E8%BF%9B%E5%BA%A6/" class="post-title-link" itemprop="url">linux下显示dd命令的进度</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-13 14:30:01 / 修改时间：14:31:14" itemprop="dateCreated datePublished" datetime="2024-06-13T14:30:01+08:00">2024-06-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/potato-chip/p/12759103.html">https://www.cnblogs.com/potato-chip/p/12759103.html</a></p>
<p>sudo dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;tmp&#x2F;zero.img status&#x3D;progress<br>linux下显示dd命令的进度：<br>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;tmp&#x2F;zero.img bs&#x3D;10M count&#x3D;100000<br>想要查看上面的dd命令的执行进度，可以使用下面几种方法：<br>比如：每5秒输出dd的进度<br>方法一：<br>watch -n 5 pkill -USR1 ^dd$</p>
<p>方法二：<br>watch -n 5 killall -USR1 dd</p>
<p>方法三：<br>while killall -USR1 dd; do sleep 5; done</p>
<p>方法四：<br>while (ps auxww |grep “ dd “ |grep -v grep |awk ‘{print $2}’ |while read pid; do kill -USR1 $pid; done) ; do sleep 5; done<br>上述四种方法中使用三个命令：pkill、killall、kill向dd命令发送SIGUSR1信息，dd命令进程接收到信号之后就打印出自己当前的进度。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/12/publish-obsidian-post-to-wordpress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/12/publish-obsidian-post-to-wordpress/" class="post-title-link" itemprop="url">publish-obsidian-post-to-wordpress</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-12 21:24:54 / 修改时间：21:26:00" itemprop="dateCreated datePublished" datetime="2024-06-12T21:24:54+08:00">2024-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://einverne.github.io/post/2023/08/publish-obsidian-post-to-wordpress.html">https://einverne.github.io/post/2023/08/publish-obsidian-post-to-wordpress.html</a></p>
<p>如何快速分享 Obsidian 中的笔记是从我开始使用 Obsidian 之后一直在思考的问题，在之前，因为我所有的笔记都是通过 Markdown 来存放在本地的，如果我想要分享一个笔记，一般就是将笔记移动到 <code>Blog/_post</code> 目录下，因为我使用一个 Git 仓库来管理我所有的笔记（Vault）然后使用 git submodule 的方式来将我的 <a target="_blank" rel="noopener" href="https://blog.einverne.info/">Jekyll 博客</a>，<a target="_blank" rel="noopener" href="https://invest.einverne.info/">Hexo 博客</a> 放到我的统一的笔记库里面。所以当我想要发布一篇笔记的时候，就是将笔记移动到对应的博客的目录，然后在使用 git commit 提交，push 来发布，之后的过程都是通过 CI 自动完成的。</p>
<p>虽然这样的方式我已经使用了很多年了，也没有什么大的问题，唯一的问题就是因为发布博客对 Markdown 的标题有一些限制，所以发布之前都得进行重命名。并且我没有办法做到一键发布，大部分的情况下我都必需打开终端，然后进行提交。直到我发现了一款叫做 [[obsidian-wordpress]] 的插件。</p>
<p>这个<a target="_blank" rel="noopener" href="https://github.com/devbean/obsidian-wordpress">插件</a>完美的解决了我想要快速分享一篇笔记，然后还不需要我做任何调整，当完成初次的配置之后，基本上只需要点击一下就可以完成发布。</p>
<p><img src="https://photo.einverne.info/images/2023/08/28/U9pC.png" alt="U9pC"></p>
<p>这个插件使用 WordPress 的接口（XML-RPC 或 REST）来发布文章。</p>
<h2 id="obsidian-wordpress"><a href="#obsidian-wordpress" class="headerlink" title="obsidian wordpress"></a>obsidian wordpress</h2><p><a target="_blank" rel="noopener" href="https://github.com/devbean/obsidian-wordpress">obsidian-wordpress</a> 是一款 Obsidian 下的插件，可以一键将笔记发布到 WordPress 站点中。该插件使用 XML-RPC 或 REST 接口进行发布。</p>
<p>XML-RPC 是默认启用的，但有些站点可能由于安全问题而禁用它。 虽然有些共享主机可能默认禁用 XML-RPC，但是您无法启用它。 因此，如果禁用 XML-RPC，这个插件将不起作用。</p>
<p>在 WodrPress 4.7 之后，REST API 会在默认情况下启用。 一些 REST API 需要额外的操作来保护可写 API。 历史上 REST 接口是通过安装插件实现的。 在 WordPress 5.6 版本之后，引入了应用程序密码来完成类似的工作。 因此在 WordPress 5.6 之后 ，应用程序密码是首选的。</p>
<h2 id="初次设置"><a href="#初次设置" class="headerlink" title="初次设置"></a>初次设置</h2><p>在插件的设置中，找到 Profile，这里可以配置站点的信息，包括地址，API 类型，用户名，密码等。</p>
<p><img src="https://photo.einverne.info/images/2023/08/28/UA2H.png" alt="UA2H"></p>
<p>需要注意的是这里的密码，在最新版的 WordPress 中请使用应用程序密码，在用户管理下面生成。</p>
<p>当完成以上的设置之后，在任意的笔记中，都可以在侧边栏中找到 WordPress 的按钮，然后点击，选择分类，一键完成发布。最近我有在写我的 <a target="_blank" rel="noopener" href="https://japan.einverne.info/">日本生活</a> ，其中所有的内容都是我在 Obsidian 中完成编写，然后发布的。我创建了一个单独的文件夹用来存放所有发布到该网站的内容，并且这些内容也可以很好的和我的其他笔记进行融合，并且在我修改了文章的内容之后，也可以快速进行一键发布。</p>
<p>在以前我使用 WordPress 的时候，非常不方面的一点就是对其中文章内容的修改非常不方便，我不喜欢在线的编辑器，而如今 Obsidian 就成为了我的 WordPress 的本地编辑器。</p>
<h2 id="图片怎么办"><a href="#图片怎么办" class="headerlink" title="图片怎么办"></a>图片怎么办</h2><p>文章中的图片我是我之前搭建的 [[Chevereto]] 图床，配合 macOS 下的 uPic，我设置了快捷键 Ctrl + Shift + U，就可以一键上传粘贴板中的内容。然后直接在 Obsidian 中使用即可。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/12/%E5%8F%8D%E6%9F%A5%E4%B8%80%E4%B8%AA%E5%9F%9F%E5%90%8D%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%90%E5%9F%9F%E5%90%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/12/%E5%8F%8D%E6%9F%A5%E4%B8%80%E4%B8%AA%E5%9F%9F%E5%90%8D%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%90%E5%9F%9F%E5%90%8D/" class="post-title-link" itemprop="url">反查一个域名的所有子域名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-12 21:03:34 / 修改时间：21:18:38" itemprop="dateCreated datePublished" datetime="2024-06-12T21:03:34+08:00">2024-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://einverne.github.io/post/2023/09/subdomain-scanner.html">https://einverne.github.io/post/2023/09/subdomain-scanner.html</a></p>
<p>前段时间看到一篇文章说因为 Nginx 的一个「特性」，在直接访问 IP ，并且没有配置默认证书的情况下 Nginx 就会返回一个 SSL 证书从而倒置域名的泄露，进而泄露了网站的源 IP，使得一些扫描网站，比如 [[censys]] 可以直接查询到域名背后的网站 IP，从而导致网站即使用了 CDN 也会遭受到攻击。在这个契机下，我又开始了衍生，因为在 censys，[[fofa]]，[[Shodan]] 等等网站上你只需要输入一个域名就可以获得所有这个站点相关的信息，那么有没有办法可以在只知道一个网站域名的情况下知道所有的二级域名呢。</p>
<p>于是抱着这个新想法，进行了一番调查，果然还是有办法可以知道的。我最最朴素的想法就是写一个遍历，直接通过随机的字符串，<code>[a-z0-9\-]</code> 等等字符的组合，然后进行这些域名检查，ping，dig 的结果，如果有返回，可以认为这个子域名被启用了。但是很显然这个想法的效率太低了，并且遍历这么多无效的域名前缀很显然没有办法最快的找到所有的。</p>
<p>然后我就找到了 [[MassDNS]]，一款使用 C 语言编写的高性能子域名扫描工具。它通过使用自定义的 DNS 解析器和并发查询来加快子域名的发现速度。MassDNS 支持使用字典文件进行子域名爆破，并提供了丰富的配置选项来优化扫描过程。 MassDNS 还支持自定义的 DNS 服务器，并可以通过设置最大查询时间和最大重试次数等参数来控制扫描过程中的超时和重试行为。此外，它还提供了多种输出格式，包括文本、JSON 和 CSV，以便用户根据需要对扫描结果进行分析和处理。 使用 MassDNS 进行子域名扫描非常简单，只需指定目标域名和字典文件即可开始扫描。它还提供了多线程支持，可以根据系统资源情况调整并发线程数量，以实现更快的扫描速度。</p>
<p>然后我又循着脉络找到了 <a target="_blank" rel="noopener" href="https://github.com/shmilylty/OneForAll">OneForAll</a> 这样一个开源的工具，它是一个功能强大的子域名收集工具，集成了非常多的工具，从它的官方介绍上也可以看出来它收集子域名的思路和方法。</p>
<ul>
<li>利用成熟第三方的情报收集<ul>
<li>利用证书收集子域名情报，比如通过 <code>censys_api</code>，<code>certspotter</code>，<code>crtsh</code> 等等</li>
<li>常规检查收集子域<ul>
<li>域传送漏洞利用<code>axfr</code></li>
<li>检查跨域策略文件<code>cdx</code></li>
<li>检查 HTTPS 证书<code>cert</code></li>
<li>检查内容安全策略<code>csp</code></li>
<li>检查 robots 文件<code>robots</code></li>
<li>检查 sitemap 文件<code>sitemap</code></li>
<li>利用 NSEC 记录遍历 DNS 域<code>dnssec</code></li>
<li>NSEC3 记录</li>
</ul>
</li>
<li>网络爬虫存档记录，<code>archivecrawl</code>，<code>commoncrawl</code></li>
<li>通过第三方 DNS 数据集收集子域</li>
<li>直接通过 DNS 查询收集，SRV记录，MX,NS,SOA,TXT记录</li>
<li>利用威胁情报平台数据收集子域</li>
<li>搜索引擎发现子域</li>
</ul>
</li>
<li>通过字典，或者遍历来查询子域名</li>
<li>通过 [[MassDNS]] 来多线程查询子域名</li>
</ul>
<h2 id="OneForAll-使用"><a href="#OneForAll-使用" class="headerlink" title="OneForAll 使用"></a>OneForAll 使用</h2><p>首先获取 OneForAll 的代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:shmilylty/OneForAll.git</span><br></pre></td></tr></table></figure>

<p>通过 <a href="/post/2017/04/pyenv.html">pyenv</a> 或者其他熟悉的工具，安装 Python 依赖，然后执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 oneforall.py --target douban.com run</span><br></pre></td></tr></table></figure>

<p>很快就能获得一个 CSV 的结果。</p>
<h2 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h2><ul>
<li>[[Findomain]]</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/06/12/genisoimage%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="英雄本色">
      <meta itemprop="description" content="英雄本色的博客，记录生活，分享感悟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="英雄本色的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/06/12/genisoimage%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95/" class="post-title-link" itemprop="url">genisoimage命令用法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-06-12 13:57:03 / 修改时间：14:00:19" itemprop="dateCreated datePublished" datetime="2024-06-12T13:57:03+08:00">2024-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>转载 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/klb561/p/9108712.html">https://www.cnblogs.com/klb561/p/9108712.html</a></p>
<p>功能说明：建立ISO 9660映像文件。  常用命令：genisoimage -o imagename.iso file 语 法：mkisofs [-adDfhJlLNrRTvz][-print-size][-quiet][-A ][-abstract ][-b ][-biblio ][-c ][-C ][-copyright ][-hide ][-hide-joliet ][-log-file ][-m ][-M ][-o ][-p ][-P ][-sysid ][-V ][-volset ][-volset-size ][-volset-seqno ][-x ][目录或文件]  补充说明：mkisofs可将指定的目录与文件做成ISO 9660格式的映像文件</p>
<p>基本用法：</p>
<p>mkisofs (or genisoimage) -o image.iso &#x2F;path&#x2F;of&#x2F;folder</p>
<p>如有中文不能显示尝试(建议使用)：</p>
<p>mkisofs (or genisoimage) -J -o image.iso &#x2F;path&#x2F;of&#x2F;folder</p>
<p>完整命令查看：</p>
<p>mkisofs (or genisoimage) –help 或 man genisoimage</p>
<p>命令: mkisofs(make iso file system)</p>
<p>功能说明：建立ISO 9660映像文件。<br>  语 法：mkisofs [-adDfhJlLNrRTvz][-print-size][-quiet][-A &lt;应用程序ID&gt;][-abstract &lt;摘要文件&gt;][-b &lt;开机映像文件&gt;][-biblio ][-c &lt;开机文件名称&gt;][-C &lt;盘区编号，磁区编号&gt;][-copyright &lt;版权信息文件&gt;][-hide &lt;目录或文件名&gt;][-hide-joliet &lt;文件或目录名&gt;][-log-file &lt;记录文件&gt;][-m &lt;目录或文件名&gt;][-M &lt;开机映像文件&gt;][-o &lt;映像文件&gt;][-p &lt;数据处理人&gt;][-P &lt;光盘发行人&gt;][-sysid &lt;系统ID &gt;][-V &lt;光盘ID &gt;][-volset &lt;卷册集ID&gt;][-volset-size &lt;光盘总数&gt;][-volset-seqno &lt;卷册序号&gt;][-x &lt;目录&gt;][目录或文件]<br>补充说明：mkisofs可将指定的目录与文件做成ISO 9660格式的映像文件，以供刻录光盘。<br>参 数：<br>-a或–all mkisofs通常不处理备份文件。使用此参数可以把备份文件加到映像文件中。<br>-A&lt;应用程序ID&gt;或-appid&lt;应用程序ID&gt; 指定光盘的应用程序ID。<br>-abstract&lt;摘要文件&gt; 指定摘要文件的文件名。<br>-b&lt;开机映像文件&gt;或-eltorito-boot&lt;开机映像文件&gt; 指定在制作可开机光盘时所需的开机映像文件。<br>-biblio 指定ISBN文件的文件名，ISBN文件位于光盘根目录下，记录光盘的ISBN。<br>-c&lt;开机文件名称&gt; 制作可开机光盘时，mkisofs会将开机映像文件中的全-eltorito-catalog&lt;开机文件名称&gt;全部内容作成一个文件。<br>-C&lt;盘区编号，盘区编号&gt; 将许多节区合成一个映像文件时，必须使用此参数。<br>-copyright&lt;版权信息文件&gt; 指定版权信息文件的文件名。<br>-d或-omit-period 省略文件后的句号。<br>-D或-disable-deep-relocation ISO 9660最多只能处理8层的目录，超过8层的部分，RRIP会自动将它们设置成ISO 9660兼容的格式。使用-D参数可关闭此功能。<br>-f或-follow-links 忽略符号连接。<br>-h 显示帮助。<br>-hide&lt;目录或文件名&gt; 使指定的目录或文件在ISO 9660或Rock RidgeExtensions的系统中隐藏。<br>-hide-joliet&lt;目录或文件名&gt; 使指定的目录或文件在Joliet系统中隐藏。<br>-J或-joliet 使用Joliet格式的目录与文件名称。<br>-l或-full-iso9660-filenames 使用ISO 9660 32字符长度的文件名。<br>-L或-allow-leading-dots 允许文件名的第一个字符为句号。<br>-log-file&lt;记录文件&gt; 在执行过程中若有错误信息，预设会显示在屏幕上。<br>-m&lt;目录或文件名&gt;或-exclude&lt;目录或文件名&gt; 指定的目录或文件名将不会房入映像文件中。<br>-M&lt;映像文件&gt;或-prev-session&lt;映像文件&gt; 与指定的映像文件合并。<br>-N或-omit-version-number 省略ISO 9660文件中的版本信息。<br>-o&lt;映像文件&gt;或-output&lt;映像文件&gt; 指定映像文件的名称。<br>-p&lt;数据处理人&gt;或-preparer&lt;数据处理人&gt; 记录光盘的数据处理人。<br>-print-size 显示预估的文件系统大小。<br>-quiet 执行时不显示任何信息。<br>-r或-rational-rock 使用Rock Ridge Extensions，并开放全部文件的读取权限。<br>-R或-rock 使用Rock Ridge Extensions。<br>-sysid&lt;系统ID&gt; 指定光盘的系统ID。<br>-T或-translation-table 建立文件名的转换表，适用于不支持Rock Ridge Extensions的系统上。<br>-v或-verbose 执行时显示详细的信息。<br>-V&lt;光盘ID</p>
<p>###############################################<br>#################################################</p>
<p> mkisofs(8) 程序作为 sysutils&#x2F;cdrtools port 的一部分， 将生成 ISO 9660 文件系统，其中包含 UNIX? 命名空间中的文件名。最简单的用法是：</p>
<h1 id="mkisofs-o-imagefile-iso-path-to-tree"><a href="#mkisofs-o-imagefile-iso-path-to-tree" class="headerlink" title="mkisofs -o imagefile.iso &#x2F;path&#x2F;to&#x2F;tree"></a>mkisofs -o imagefile.iso &#x2F;path&#x2F;to&#x2F;tree</h1><p>这个命令将创建一个包含 ISO9660 文件系统的 imagefile.iso 文件，它是目录树 &#x2F;path&#x2F;to&#x2F;tree 的一个副本。 在处理过程中，它将文件名称映射为标准的 ISO9660 文件系统的文件名，将排除那些不典型的 ISO 文件系统的文件。<br>有很多选项能够用来克服那些限制。特别的，-R 选项能够启用 Rock Ridge 扩展一般的 UNIX 系统，-J 选项能启用用于 Microsoft 系统的 Joliet 扩展，-hfs 选项能用来创建用于 Mac OS? 系统的 HFS 文件系统。<br>    RockRidge格式是ISO9660格式的延伸，支持文件名字母的大小写、符号字符、长文件名以及超过8层的目录结构。RockRidge使CD-ROM能兼容Unix的文件系统，因此它在Unix系统上已经被广泛地使用。<br>    对于那些即将要在 FreeBSD 系统中使用 CD 的人来说，-U 选项能用来消除所有文件名的限制。当使用-R 选项时，它会产生一个 文件系统映像，它与您从那儿启动 FreeBSD 树是一样的，虽然它在许多方面也违反了 ISO 9660 的标准。<br>最后一个常用的选项是 -b。 它用来指定启动映像的位置，用以生成 “El Torito” 启动 CD。 这个选项使用一个参数， 用以指定将写入 CD 的目录的根。默认情况下， mkisofs(8) 会以常说的 “软盘模拟” 方式来创建 ISO， 因此它希望引导映像文件的尺寸恰好是 1200， 1440 或 2880 KB。 某些引导加载器， 例如 FreeBSD 发行版磁盘， 并不使用模拟模式；这种情况下， 需要使用 -no-emul-boot 选项。 因此， 如果 &#x2F;tmp&#x2F;myboot 是一个包含了启动映像文件 &#x2F;tmp&#x2F;myboot&#x2F;boot&#x2F;cdboot 的可引导的 FreeBSD 系统，您就可以使用下面的命令生成 ISO 9660 文件系统映像 &#x2F;tmp&#x2F;bootable.iso：</p>
<h1 id="mkisofs-R-no-emul-boot-b-boot-cdboot-o-tmp-bootable-iso-tmp-myboot"><a href="#mkisofs-R-no-emul-boot-b-boot-cdboot-o-tmp-bootable-iso-tmp-myboot" class="headerlink" title="mkisofs -R -no-emul-boot -b boot&#x2F;cdboot -o &#x2F;tmp&#x2F;bootable.iso &#x2F;tmp&#x2F;myboot"></a>mkisofs -R -no-emul-boot -b boot&#x2F;cdboot -o &#x2F;tmp&#x2F;bootable.iso &#x2F;tmp&#x2F;myboot</h1><p>完成这些工作之后， 如果您的内核中配置了 md，就可以用下列命令来挂接文件系统了：</p>
<h1 id="mdconfig-a-t-vnode-f-tmp-bootable-iso-u-0"><a href="#mdconfig-a-t-vnode-f-tmp-bootable-iso-u-0" class="headerlink" title="mdconfig -a -t vnode -f &#x2F;tmp&#x2F;bootable.iso -u 0"></a>mdconfig -a -t vnode -f &#x2F;tmp&#x2F;bootable.iso -u 0</h1><h1 id="mount-t-cd9660-dev-md0-mnt"><a href="#mount-t-cd9660-dev-md0-mnt" class="headerlink" title="mount -t cd9660 &#x2F;dev&#x2F;md0 &#x2F;mnt"></a>mount -t cd9660 &#x2F;dev&#x2F;md0 &#x2F;mnt</h1><p>可以发现 &#x2F;mnt 和 &#x2F;tmp&#x2F;myboot 是一样的。</p>
<h4 id="1-安装所需的软件包："><a href="#1-安装所需的软件包：" class="headerlink" title="1.安装所需的软件包："></a>1.安装所需的软件包：</h4><p>[root@localhost ~]# yum -y install createrepo mkisofs isomd5sum</p>
<h4 id="2-根据当前系统已安装的软件包生成安装系统所需要的rpm列表"><a href="#2-根据当前系统已安装的软件包生成安装系统所需要的rpm列表" class="headerlink" title="2.根据当前系统已安装的软件包生成安装系统所需要的rpm列表"></a>2.根据当前系统已安装的软件包生成安装系统所需要的rpm列表</h4><p>[root@localhost ~]# awk ‘&#x2F;Installing&#x2F;{print $2}’ install.log |sed ‘s&#x2F;^[0-9]*:&#x2F;&#x2F;g’ &gt;&#x2F;root&#x2F;packages.list</p>
<h4 id="3-建立定制所需要的目录并把除Packages目录以外的文件复制到新的系统目录"><a href="#3-建立定制所需要的目录并把除Packages目录以外的文件复制到新的系统目录" class="headerlink" title="3.建立定制所需要的目录并把除Packages目录以外的文件复制到新的系统目录"></a>3.建立定制所需要的目录并把除Packages目录以外的文件复制到新的系统目录</h4><p>[root@localhost ~]# mkdir  &#x2F;mnt&#x2F;cdrom<br>[root@localhost ~]# mkdir -p &#x2F;data&#x2F;OS<br>[root@localhost ~]# mount &#x2F;dev&#x2F;cdrom &#x2F;mnt&#x2F;cdrom&#x2F;<br>[root@localhost ~]# rsync -a –exclude&#x3D;Packages &#x2F;mnt&#x2F;cdrom&#x2F; &#x2F;data&#x2F;OS&#x2F;<br>[root@localhost ~]# mkdir &#x2F;data&#x2F;OS&#x2F;Packages</p>
<h4 id="4-使用脚本自动复制所需要的RPM包到新建立的光盘目录中Packages"><a href="#4-使用脚本自动复制所需要的RPM包到新建立的光盘目录中Packages" class="headerlink" title="4.使用脚本自动复制所需要的RPM包到新建立的光盘目录中Packages"></a>4.使用脚本自动复制所需要的RPM包到新建立的光盘目录中Packages</h4><p>[root@localhost ~]# vim cprpms.sh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash  </span><br><span class="line">SRC_RPMS=/mnt/cdrom/Packages     </span><br><span class="line">DST_RPMS=/data/OS/Packages     </span><br><span class="line">packages_list=/root/packages.list </span><br><span class="line">number_of_packages=`cat $packages_list | wc -l` </span><br><span class="line">i=1 </span><br><span class="line">while [ $i -le $number_of_packages ] ; </span><br><span class="line"> do </span><br><span class="line">    name=`head -n $i $packages_list | tail -n -1` </span><br><span class="line">         echo &quot;cp $SRC_RPMS/$name* $DST_RPMS/&quot;  </span><br><span class="line">         cp $SRC_RPMS/$name* $DST_RPMS/         </span><br><span class="line">    i=`expr $i + 1` </span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p> [root@localhost ~]# sh cprpms.sh</p>
<h4 id="5-配置kickstart脚本"><a href="#5-配置kickstart脚本" class="headerlink" title="5.配置kickstart脚本"></a>5.配置kickstart脚本</h4><p>[root@localhost ~]# vim &#x2F;data&#x2F;OS&#x2F;isolinux&#x2F;ks.cfg</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">#platform=x86, AMD64, or Intel EM64T </span><br><span class="line"># Firewall configuration </span><br><span class="line">firewall --disabled </span><br><span class="line"># Install OS instead of upgrade </span><br><span class="line">install </span><br><span class="line"># Use CDROM installation media </span><br><span class="line">cdrom </span><br><span class="line"># Root password default is &quot;redhat&quot; </span><br><span class="line">rootpw --iscrypted $1$JJuQiyTA$fbBF2fBqHB1P5PpFNy5f.1</span><br><span class="line"># System authorization information </span><br><span class="line">auth  --useshadow  --passalgo=md5</span><br><span class="line"># Use text mode install </span><br><span class="line">text </span><br><span class="line">firstboot --disable </span><br><span class="line"># System keyboard </span><br><span class="line">keyboard us </span><br><span class="line"># System language </span><br><span class="line">lang en_US </span><br><span class="line"># SELinux configuration </span><br><span class="line">selinux --disabled </span><br><span class="line"># Do not configure the X Window System </span><br><span class="line">skipx </span><br><span class="line"># Installation logging level </span><br><span class="line">logging --level=info</span><br><span class="line"># Reboot after installation </span><br><span class="line">reboot </span><br><span class="line"># System timezone </span><br><span class="line">timezone  Asia/Shanghai </span><br><span class="line"># Network information </span><br><span class="line">network  --bootproto=dhcp --device=eth0 --onboot=on –noipv6 </span><br><span class="line"># System bootloader configuration </span><br><span class="line">bootloader --location=mbr</span><br><span class="line"># Clear the Master Boot Record </span><br><span class="line">zerombr </span><br><span class="line"># Partition clearing information </span><br><span class="line">clearpart --all --initlabel </span><br><span class="line"># Disk partitioning information </span><br><span class="line">ignoredisk --only-use=sda</span><br><span class="line">part /boot --fstype=&quot;ext4&quot; --size=1024</span><br><span class="line">part swap --recommended</span><br><span class="line">part / --fstype=&quot;ext4&quot; --grow --size=1</span><br><span class="line">%packages</span><br><span class="line">@additional-devel</span><br><span class="line">@base</span><br><span class="line">@core</span><br><span class="line">@debugging</span><br><span class="line">@basic-desktop</span><br><span class="line">@desktop-debugging</span><br><span class="line">@desktop-platform</span><br><span class="line">@desktop-platform-devel</span><br><span class="line">@development</span><br><span class="line">@directory-client</span><br><span class="line">@eclipse</span><br><span class="line">@emacs</span><br><span class="line">@fonts</span><br><span class="line">@general-desktop</span><br><span class="line">@graphical-admin-tools</span><br><span class="line">@graphics</span><br><span class="line">@input-methods</span><br><span class="line">@internet-browser</span><br><span class="line">@java-platform</span><br><span class="line">@legacy-x</span><br><span class="line">@network-file-system-client</span><br><span class="line">@performance</span><br><span class="line">@perl-runtime</span><br><span class="line">@print-client</span><br><span class="line">@remote-desktop-clients</span><br><span class="line">@server-platform</span><br><span class="line">@server-platform-devel</span><br><span class="line">@server-policy</span><br><span class="line">@tex</span><br><span class="line">@technical-writing</span><br><span class="line">@virtualization</span><br><span class="line">@virtualization-client</span><br><span class="line">@virtualization-platform</span><br><span class="line">@workstation-policy</span><br><span class="line">@x11</span><br><span class="line">libgcrypt-devel</span><br><span class="line">libXinerama-devel</span><br><span class="line">openmotif-devel</span><br><span class="line">libXmu-devel</span><br><span class="line">xorg-x11-proto-devel</span><br><span class="line">startup-notification-devel</span><br><span class="line">libgnomeui-devel</span><br><span class="line">libbonobo-devel</span><br><span class="line">junit</span><br><span class="line">libXau-devel</span><br><span class="line">libXrandr-devel</span><br><span class="line">popt-devel</span><br><span class="line">gnome-python2-desktop</span><br><span class="line">libdrm-devel</span><br><span class="line">libxslt-devel</span><br><span class="line">libglade2-devel</span><br><span class="line">gnutls-devel</span><br><span class="line">mtools</span><br><span class="line">pax</span><br><span class="line">python-dmidecode</span><br><span class="line">oddjob</span><br><span class="line">wodim</span><br><span class="line">sgpio</span><br><span class="line">genisoimage</span><br><span class="line">device-mapper-persistent-data</span><br><span class="line">systemtap-client</span><br><span class="line">abrt-gui</span><br><span class="line">desktop-file-utils</span><br><span class="line">ant</span><br><span class="line">rpmdevtools</span><br><span class="line">jpackage-utils</span><br><span class="line">rpmlint</span><br><span class="line">samba-winbind</span><br><span class="line">certmonger</span><br><span class="line">pam_krb5</span><br><span class="line">krb5-workstation</span><br><span class="line">netpbm-progs</span><br><span class="line">openmotif</span><br><span class="line">libXmu</span><br><span class="line">libXp</span><br><span class="line">perl-DBD-SQLite</span><br><span class="line">libvirt-java</span><br><span class="line">%end</span><br></pre></td></tr></table></figure>

<h4 id="6-让系统从kickstart配置启动安装"><a href="#6-让系统从kickstart配置启动安装" class="headerlink" title="6.让系统从kickstart配置启动安装"></a>6.让系统从kickstart配置启动安装</h4><p>[root@localhost OS]# vim &#x2F;data&#x2F;OS&#x2F;isolinux&#x2F;isolinux.cfg   #备注这里需要给执行权限，才可以编辑，默认只读；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">default ks</span><br><span class="line">prompt 1</span><br><span class="line">timeout 60</span><br><span class="line">display boot.msg</span><br><span class="line">F1 boot.msg</span><br><span class="line">F2 options.msg</span><br><span class="line">F3 general.msg</span><br><span class="line">F4 param.msg</span><br><span class="line">F5 rescue.msg</span><br><span class="line">label linux</span><br><span class="line">kernel vmlinuz</span><br><span class="line">append initrd=initrd.img</span><br><span class="line">label text</span><br><span class="line">kernel vmlinuz</span><br><span class="line">append initrd=initrd.img text</span><br><span class="line">label ks</span><br><span class="line">kernel vmlinuz</span><br><span class="line">append ks=cdrom:/isolinux/ks.cfg initrd=initrd.img</span><br><span class="line">label local</span><br><span class="line">localboot 1</span><br><span class="line">label memtest86</span><br><span class="line">kernel memtest</span><br><span class="line">append -</span><br></pre></td></tr></table></figure>

<h4 id="7-生成rpm包的依赖关系"><a href="#7-生成rpm包的依赖关系" class="headerlink" title="7.生成rpm包的依赖关系"></a>7.生成rpm包的依赖关系</h4><p>[root@localhost ~]# cd &#x2F;data&#x2F;OS&#x2F;<br>[root@localhost OS]# createrepo -g repodata&#x2F;<em>-comps.xml &#x2F;data&#x2F;OS&#x2F;<br>[root@localhost OS]# declare -x discinfo&#x3D;<code>head -1 .discinfo</code><br>[root@localhost OS]# createrepo -u “media:&#x2F;&#x2F;$discinfo” -g repodata&#x2F;</em>-comps.xml &#x2F;data&#x2F;OS&#x2F;</p>
<h4 id="8-生成ISO镜像文件"><a href="#8-生成ISO镜像文件" class="headerlink" title="8.生成ISO镜像文件"></a>8.生成ISO镜像文件</h4><p>[root@localhost ~]# cd &#x2F;data&#x2F;OS&#x2F;<br>[root@localhost OS]# mkisofs -R -J -T -r -l -d -joliet-long -allow-multidot <br> -allow-leading-dots -no-bak -o &#x2F;data&#x2F;CentOS-6.7-x86_64.iso <br> -b isolinux&#x2F;isolinux.bin -c isolinux&#x2F;boot.cat -no-emul-boot <br> -boot-load-size 4 -boot-info-table &#x2F;data&#x2F;OS</p>
<h4 id="9-生成MD5校验码"><a href="#9-生成MD5校验码" class="headerlink" title="9.生成MD5校验码"></a>9.生成MD5校验码</h4><p>[root@localhost ~]# implantisomd5 &#x2F;data&#x2F;CentOS-6.3-x86_64.iso</p>
<h4 id="10-测试"><a href="#10-测试" class="headerlink" title="10.测试"></a>10.测试</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">英雄本色</p>
  <div class="site-description" itemprop="description">英雄本色的博客，记录生活，分享感悟。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">33</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">英雄本色</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
